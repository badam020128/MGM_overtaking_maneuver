<launch>

    <!-- Gazebo -->
    <include file="$(find-pkg-share gazebo_ros)/launch/gzserver.launch.py">
        <arg name="world" value="$(find-pkg-share overtaking_maneuver)/world/road.world"/>
    </include>

    <include file="$(find-pkg-share gazebo_ros)/launch/gzclient.launch.py">
    </include>

    <!-- Multi robot -->
  <!-- Multi robot -->
    <include file="$(find-pkg-share gyak9)/launch/ns_robot.launch.py">
        <arg name="namespace" value="robot1"/>
        <arg name="x_pose" value="-2.0"/>
        <arg name="y_pose" value="-1.75"/>
    </include>
    <node pkg="tf2_ros" exec="static_transform_publisher" name="map_to_robot1_odom" output="screen"
        args="0.0 0.0 0.0 0.0 0.0 0.0 map robot1/odom"/>

    <include file="$(find-pkg-share gyak9)/launch/ns_robot.launch.py">
        <arg name="namespace" value="robot2"/>
        <arg name="x_pose" value="2.0"/>
        <arg name="y_pose" value="-1.75"/>
    </include>
    <node pkg="tf2_ros" exec="static_transform_publisher" name="map_to_robot2_odom" output="screen"
        args="0.0 0.0 0.0 0.0 0.0 0.0 map robot2/odom"/>


    <!-- Node -->
    <node pkg="overtaking_maneuver" exec="simple_move" name="simple_move" output="screen">
        <param name="use_sim_time" value="true"/>
    </node>
     <node pkg="overtaking_maneuver" exec="lidar_processor" name="lidar_processor" output="screen">
        <param name="use_sim_time" value="true"/>
    </node>
    <node pkg="overtaking_maneuver" exec="dynamic_planner" name="dynamic_planner" output="screen">
        <param name="use_sim_time" value="true"/>

        <param name="home_lane_y" value="-1.75"/>
        <param name="oncoming_lane_y" value="1.75"/>
        <param name="trigger_distance" value="6.0"/> 
        <param name="p2_lookahead_x" value="10.0"/> 
        <param name="p3_lookahead_x" value="10.0"/> 
        <param name="overtake_speed_boost" value="0.5"/>
    </node>


    <!-- RVIZ -->
    <node pkg="rviz2" exec="rviz2" name="rviz2" args="-d $(find-pkg-share overtaking_maneuver)/rviz/gyak9.rviz"/>

</launch>